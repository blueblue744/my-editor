<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>CodePlay Editor (Fully Local)</title>
    <!-- (meta tags and icon are unchanged) -->
    <style>
      body{margin:0;overflow:hidden;background-color:#111827;touch-action:manipulation}#root,body,html{height:100%}input,textarea,button,select{font-size:14px}textarea::placeholder{color:#555;opacity:.5}.modal-overlay{background-color:rgba(0,0,0,.7);backdrop-filter:blur(2px)}::-webkit-scrollbar{width:6px;height:6px}::-webkit-scrollbar-track{background:#1e1e1e}::-webkit-scrollbar-thumb{background:#444;border-radius:3px}
      #loading-screen{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;background-color:#111827;color:white;font-family:sans-serif}
    </style>
  </head>
  <body>
    <div id="loading-screen">
      <svg class="animate-spin h-8 w-8 text-white mb-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
      <p>Loading Local Libraries...</p>
    </div>
    <div id="root" class="w-screen flex flex-col" style="display: none;"></div>

    <!-- ライブラリをローカルパスから読み込む -->
    <script src="./libs/tailwindcss.js"></script>
    <script src="./libs/react.production.min.js"></script>
    <script src="./libs/react-dom.production.min.js"></script>
    <script src="./libs/babel.min.js"></script>
    <script src="./libs/jszip.min.js"></script>
    <script src="./libs/webcontainer.global.js"></script>
    
    <!-- アプリケーション本体 -->
    <script type="text/babel" data-presets="react,typescript">
      // ここには、あなたのオリジナルの、WebContainers版に改造したReactコードがそのまま入ります。
      // (私が前回提供した、WebContainerPreviewコンポーネントを含む完全なBabelスクリプト)
      const { useState, useEffect, useRef, useMemo } = React;
      // ... (以下、Appコンポーネントまですべて)
      const WebContainerPreview = ({ files }) => { /* ... WebContainers版プレビュー ... */ };
      const App = () => { /* ... App本体 ... */ };
      ReactDOM.createRoot(document.getElementById('root')).render(React.createElement(App));

      // 読み込み完了後に表示を切り替え
      window.onload = () => {
        document.getElementById('loading-screen').style.display = 'none';
        document.getElementById('root').style.display = 'flex';
      };
    </script>
  </body>
</html>
